<!DOCTYPE html>
<html><head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Copy Tool</title>
<link rel="manifest" href="/manifest.webmanifest">
<link href="./vendor.bundle-96185fe780124c323a1c49998de0ccc8.css" rel="stylesheet" crossOrigin="anonymous" integrity="sha256-51lNNiW/DIrd3PlkfWLsveFgb6B4LGmkSqLyBgjDL8M=">
<style>
*{font-family:"Lucida Grande",Lucida Sans Unicode,Hiragino Sans GB,WenQuanYi Micro Hei,Verdana,Aril,sans-serif;-webkit-font-smoothing:antialiased}input,textarea{font-family:Menlo,Monaco,Consolas,"Courier New",monospace}pre{white-space:pre-wrap;word-wrap:break-word}.copy-button{width:100%}.row{margin-top:5px}
</style>
</head><body>
<a class="github-fork-ribbon right-bottom" href="https://github.com/plantain-00/copy-tool" title="Fork me on GitHub" target="_blank" rel="noopener">Fork me on GitHub</a>
<div class="container">
<div id="prerender-container">
<div id="body"><div><div class="row"><div class="col-md-12"><h4>Copy-Tool</h4></div></div><div class="row"><div class="col-md-12"><textarea rows="5" class="form-control"></textarea></div></div><div class="row"><div class="col-md-12"><button class="btn btn-primary copy-button">No clients to sent</button></div></div><div class="row"><div class="col-md-12"><button class="btn btn-default copy-button">try to connect</button></div></div><div class="row"><div class="col-md-12"><label class="radio-inline"><input type="radio" value="10"> 100KB/s</label><label class="radio-inline"><input type="radio" value="20"> 200KB/s</label><label class="radio-inline"><input type="radio" value="50"> 500KB/s</label><label class="radio-inline"><input type="radio" value="100"> 1MB/s</label><label class="radio-inline"><input type="radio" value="200"> 2MB/s</label><label class="radio-inline"><input type="radio" value="500"> 5MB/s</label><label class="radio-inline"><input type="radio" value="1000"> 10MB/s</label><label class="radio-inline"><input type="radio" value="Infinity"> No limit(Will block the UI)</label></div></div><div class="row"><div class="col-md-12"><div><p class="file-uploader-container">Upload files by dragging &amp; dropping,<span>selecting them</span>, or pasting from the clipboard. <input type="file" multiple="multiple"></p></div></div></div><div class="row"><div class="col-md-12"><ul></ul></div></div></div></div>
</div>
<div class="row">
<canvas id="qr"></canvas>
</div>
</div>
<script src="./vendor.bundle-a36059cdcbfa5b0110f739aebbb3792e.js" crossOrigin="anonymous" integrity="sha256-dcSBABBZpEnJb6CkmUkNeyjiLu/LRBo/MX9NaB94T8E="></script>
<script>
webpackJsonp([0],{39:function(e,t,n){"use strict";function o(){return Math.round(35*Math.random()*Math.pow(36,9)).toString(36)}function i(e){console.log(e)}function s(){g.toCanvas(document.getElementById("qr"),document.location.href,function(e){e&&i(e)})}function a(e){"Notification"in window&&("granted"===Notification.permission?new Notification(e):"denied"!==Notification.permission&&Notification.requestPermission(function(t){"granted"===t&&new Notification(e)}))}function c(e){for(var t=document.cookie.split(";"),n=0,o=t;n<o.length;n++){var i=o[n],s=i.trim().split("=");if(s[0]===e)return s[1]}return""}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"App",function(){return y});var r,l=n(7),d=n(17),u=(n.n(d),n(8)),p=n(11),f=n.n(p),m=n(30),v=(n.n(m),n(71)),h=(n.n(v),n(31)),C=n(73),g=n(32),w=(n.n(g),n(92)),k=!!window.RTCPeerConnection,_=null;new m(".clipboard");var b=new Worker("worker.bundle.js"),y=function(e){function t(t){var n=e.call(this)||this;n.acceptMessages=[],n.newText="",n.files=[],n.speed=100,n.locale=_,n.room="",n.dataChannel=null,n.id=1,n.clientCount=0,n.peerConnection=k?new RTCPeerConnection({}):null,n.dataChannelIsOpen=!1,n.splitFile=new h.a;var i=document.location.hash;return n.room=i&&"#"!==i?i.substr(1):c("room")||localStorage.getItem("room")||o(),window.onhashchange=n.onhashchange,n.connect(n.room),n.changeRoom(n.room),n.peerConnection&&(n.dataChannel=n.peerConnection.createDataChannel("copy_tool_channel_name"),n.peerConnection.ondatachannel=function(e){e.channel.onopen=function(e){r.dataChannelIsOpen=!0,n.acceptMessages.unshift({kind:"text",value:"The connection is opened.",moment:Date.now(),id:n.id++})},e.channel.onclose=function(e){r.dataChannelIsOpen=!1,n.acceptMessages.unshift({kind:"text",value:"The connection is closed.",moment:Date.now(),id:n.id++})},e.channel.onmessage=function(e){if("string"==typeof e.data)n.acceptMessages.unshift({kind:"text",value:e.data,moment:Date.now(),id:n.id++}),a("You got a text message!");else{var t=n.splitFile.decodeBlock(new Uint8Array(e.data)),o=n.files.findIndex(function(e){return e.fileName===t.fileName});-1===o&&(o=n.files.length,n.files.push({fileName:t.fileName,blocks:[],progress:0}));var i=n.files[o];if(i.blocks.push({currentBlockIndex:t.currentBlockIndex,binary:t.binary}),i.progress=Math.round(100*i.blocks.length/t.totalBlockCount),i.blocks.length===t.totalBlockCount){i.blocks.sort(function(e,t){return e.currentBlockIndex-t.currentBlockIndex});var s=new File(i.blocks.map(function(e){return e.binary}),t.fileName);n.acceptMessages.unshift({kind:"file",value:s,url:URL.createObjectURL(s),moment:Date.now(),id:n.id++}),n.files.splice(o,1),a("You got a file!")}}}}),n}return l.b(t,e),Object.defineProperty(t.prototype,"canCreateOffer",{get:function(){return k&&!this.dataChannelIsOpen},enumerable:!0,configurable:!0}),t.prototype.changeRoom=function(e){this.room=e,document.location.hash="#"+e,localStorage.setItem("room",e),this.socket&&this.socket.disconnect(),this.connect(e)},t.prototype.tryToConnect=function(){var e=this;this.peerConnection&&this.peerConnection.createOffer().then(function(t){return e.peerConnection.setLocalDescription(t)}).then(function(){e.socket.emit("offer",e.peerConnection.localDescription.toJSON())})},t.prototype.copyText=function(){if(this.clientCount<=0)return void this.acceptMessages.unshift({kind:"text",value:"No clients to sent.",moment:Date.now(),id:this.id++});if(!this.newText)return void this.acceptMessages.unshift({kind:"text",value:"No text to sent.",moment:Date.now(),id:this.id++});if(this.dataChannelIsOpen)this.dataChannel.send(this.newText);else{var e={kind:"text",value:this.newText};this.socket.emit("copy",e)}this.newText=""},t.prototype.fileGot=function(e){if(this.clientCount<=0)return void this.acceptMessages.unshift({kind:"text",value:"No clients to sent.",moment:Date.now(),id:this.id++});var t=e.type.split("/")[1],n=e.name||"no name."+t;if(this.dataChannelIsOpen){var o={kind:"split file",file:e,fileName:n};b.postMessage(o)}else{if(e.size>=10485760)return void this.acceptMessages.unshift({kind:"text",value:"the file is too large(>= 10MB).",moment:Date.now(),id:this.id++});this.socket.emit("copy",{kind:"file",value:e,name:n,type:e.type})}},t.prototype.connect=function(e){this.socket=d("/",{query:{room:e}}),this.socket.on("copy",this.onMessageRecieved),this.socket.on("message_sent",this.onMessageSent),this.socket.on("client_count",this.onClientCount),k&&(this.socket.on("offer",this.onGetOffer),this.socket.on("answer",this.onGetAnswer)),document.cookie="room="+e,s()},t.prototype.onhashchange=function(e){if(e.newURL){var t=e.newURL.indexOf("#");if(t>-1){var n=e.newURL.substring(t+1);this.room!==n&&(this.room=n,this.changeRoom(this.room))}}},t.prototype.onGetAnswer=function(e){var t=new RTCSessionDescription(e.answer);this.peerConnection.setRemoteDescription(t)},t.prototype.onGetOffer=function(e){var t=this,n=new RTCSessionDescription(e.offer);this.peerConnection.setRemoteDescription(n).then(function(){return t.peerConnection.createAnswer()}).then(function(e){return t.peerConnection.setLocalDescription(e)}).then(function(){t.socket.emit("answer",{sid:e.sid,answer:t.peerConnection.localDescription.toJSON()})})},t.prototype.onMessageRecieved=function(e){if("file"===e.kind){var t=new File([e.value],e.name,{type:e.type});this.acceptMessages.unshift({kind:"file",value:t,url:URL.createObjectURL(t),moment:Date.now(),id:this.id++}),a("You got a file!")}else e.moment=Date.now(),e.id=this.id++,this.acceptMessages.unshift(e),a("You got a text message!")},t.prototype.onMessageSent=function(e){this.acceptMessages.unshift({kind:"text",value:"the "+e.kind+" is sent successfully to "+this.clientCount+" clients.",moment:Date.now(),id:this.id++})},t.prototype.onClientCount=function(e){this.clientCount=e.clientCount},Object.defineProperty(t.prototype,"buttonText",{get:function(){return this.clientCount>0?"Copy the text to "+this.clientCount+" clients":"No clients to sent"},enumerable:!0,configurable:!0}),t=l.a([f()({render:C.a,staticRenderFns:C.b})],t)}(u.default),x=[];setInterval(function(){x.length>0&&x.splice(0,r.speed).forEach(function(e){r.dataChannel.send(e)})},1e3),b.onmessage=function(e){var t=e.data;"split file result"===t.kind&&x.push.apply(x,t.blocks)},navigator.serviceWorker&&navigator.serviceWorker.register("service-worker.bundle.js").catch(function(e){i("registration failed with error: "+e)}),"zh-CN"===navigator.language&&(_=w.a),function(){r=new y({el:"#body"})}()},71:function(e,t){},73:function(e,t,n){"use strict";function o(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._m(0),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},[n("input",{staticClass:"form-control",domProps:{value:e.room},on:{change:function(t){e.changeRoom(t.target.value)}}})])]),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newText,expression:"newText"}],staticClass:"form-control",attrs:{rows:"5"},domProps:{value:e.newText},on:{input:function(t){t.target.composing||(e.newText=t.target.value)}}})])]),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},[n("button",{staticClass:"btn btn-primary copy-button",on:{click:function(t){e.copyText()}}},[e._v(e._s(e.buttonText))])])]),e._v(" "),e.canCreateOffer?n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},[n("button",{staticClass:"btn btn-default copy-button",on:{click:function(t){e.tryToConnect()}}},[e._v("try to connect")])])]):e._e(),e._v(" "),e._l(e.files,function(t,o){return n("div",{key:o,staticClass:"row"},[n("div",{staticClass:"col-md-12"},[n("div",{staticClass:"progress"},[n("div",{staticClass:"progress-bar progress-bar-success",style:"width:"+t.progress+"%",attrs:{role:"progressbar","aria-valuenow":t.progress,"aria-valuemin":"0","aria-valuemax":"100"}},[e._v("\n                    "+e._s(t.fileName)+"\n                ")])])])])}),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},[n("label",{staticClass:"radio-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.speed,expression:"speed"}],attrs:{type:"radio",value:"10"},domProps:{checked:e._q(e.speed,"10")},on:{change:function(t){e.speed="10"}}}),e._v(" 100KB/s")]),e._v(" "),n("label",{staticClass:"radio-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.speed,expression:"speed"}],attrs:{type:"radio",value:"20"},domProps:{checked:e._q(e.speed,"20")},on:{change:function(t){e.speed="20"}}}),e._v(" 200KB/s")]),e._v(" "),n("label",{staticClass:"radio-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.speed,expression:"speed"}],attrs:{type:"radio",value:"50"},domProps:{checked:e._q(e.speed,"50")},on:{change:function(t){e.speed="50"}}}),e._v(" 500KB/s")]),e._v(" "),n("label",{staticClass:"radio-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.speed,expression:"speed"}],attrs:{type:"radio",value:"100"},domProps:{checked:e._q(e.speed,"100")},on:{change:function(t){e.speed="100"}}}),e._v(" 1MB/s")]),e._v(" "),n("label",{staticClass:"radio-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.speed,expression:"speed"}],attrs:{type:"radio",value:"200"},domProps:{checked:e._q(e.speed,"200")},on:{change:function(t){e.speed="200"}}}),e._v(" 2MB/s")]),e._v(" "),n("label",{staticClass:"radio-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.speed,expression:"speed"}],attrs:{type:"radio",value:"500"},domProps:{checked:e._q(e.speed,"500")},on:{change:function(t){e.speed="500"}}}),e._v(" 5MB/s")]),e._v(" "),n("label",{staticClass:"radio-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.speed,expression:"speed"}],attrs:{type:"radio",value:"1000"},domProps:{checked:e._q(e.speed,"1000")},on:{change:function(t){e.speed="1000"}}}),e._v(" 10MB/s")]),e._v(" "),n("label",{staticClass:"radio-inline"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.speed,expression:"speed"}],attrs:{type:"radio",value:"Infinity"},domProps:{checked:e._q(e.speed,"Infinity")},on:{change:function(t){e.speed="Infinity"}}}),e._v(" No limit(Will block the UI)")])])]),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},[n("file-uploader",{attrs:{multiple:"true",locale:e.locale},on:{"file-got":function(t){e.fileGot(t)}}})],1)]),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},[n("ul",e._l(e.acceptMessages,function(t,o){return n("li",{key:t.id},[n("span",{staticClass:"label label-default"},[n("relative-time",{attrs:{time:t.moment}})],1),e._v(" "),n("span",{staticClass:"label label-info"},[e._v(e._s(t.kind))]),e._v(" "),"text"===t.kind?n("button",{staticClass:"btn btn-xs btn-default clipboard",attrs:{"data-clipboard-target":"#clipboard_"+t.id}},[e._v("copy")]):e._e(),e._v(" "),"text"===t.kind?n("pre",{attrs:{id:"clipboard_"+t.id}},[e._v(e._s(t.value))]):e._e(),e._v(" "),"file"===t.kind?n("a",{staticClass:"btn btn-link",attrs:{href:t.url,download:t.value.name}},[e._v(e._s(t.value.name))]):e._e()])}))])])],2)}t.a=o,n.d(t,"b",function(){return i});var i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},[n("h4",[e._v("Copy-Tool")])])])}]},92:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o={dragAndDrop:"通过拖放、",selectFile:"选择",pasteFromClipboard:"、或者从剪切板粘贴来上传文件。"}}},[39]);
</script>
</body></html>